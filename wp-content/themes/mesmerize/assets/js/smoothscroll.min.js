!function(t){function o(o){var n=isNaN(parseFloat(o.options.offset))?o.options.offset.call(o.target):o.options.offset;return o.target.offset().top-n-t("body").offset().top}function n(t,o){t===location.hash.replace("#","")||"page-top"===t&&""===location.hash.replace("#","")||setTimeout(function(){t=t?"page-top"===t?" ":"#"+t:" ",history&&history.replaceState&&history.replaceState({},"",t)},o||100)}function e(e){if(!l){l=!0;var i=o(e);t("html, body").animate({scrollTop:i},{easing:"linear",complete:function(){var i=o(e);t("html, body").animate({scrollTop:i},{easing:"linear",duration:100,complete:function(){l=!1,n(e.id,5)}})}})}}function i(o){var n=(o.attr("href")||"").split("#").pop(),e=function(t){var o=jQuery(t)[0].href||"",n="#";try{var e=new window.URL(o);n=[e.protocol,"//",e.host,e.pathname].join("")}catch(t){n=function(t){return t.split("?")[0].split("#")[0]}(o)}return n}(o),i=null,r=[location.protocol,"//",location.host,location.pathname].join("");if(e.length&&e!==r)return i;if(n.trim().length)try{i=t('[id="'+n+'"]')}catch(t){console.log("error scrollSpy",t)}return i&&i.length?i:null}function r(){a.eachCategory(function(t){var o=t.sort(function(t,o){return t.target.offset().top-o.target.offset().top}),e=o.filter(function(t){return t.target.offset().top<=window.scrollY+.25*window.innerHeight}).pop();o.forEach(function(t){e&&t.element.is(e.element)?(n(t.id,5),t.options.onChange.call(t.element)):t.options.onLeave.call(t.element)})})}"#page-top"===window.location.hash&&n("",5);var a={items:{},eachCategory:function(t){for(var o in this.items)this.items.hasOwnProperty(o)&&t(this.items[o])},addItem:function(t,o){this.items[t]||(this.items[t]=[]),this.items[t].push(o)},all:function(){var t=[];for(var o in this.items)this.items.hasOwnProperty(o)&&(t=t.concat(this.items[o]));return t}},l=!1;t.fn.smoothScrollAnchor=function(o){var n=t(this);o=jQuery.extend({offset:0},o),n.each(function(){var n=t(this),r=o.target||i(n);if(r&&r.length){var a={element:n,options:o,target:r,targetSel:o.targetSel||'[id="'+r.attr("id").trim()+'"]',id:(r.attr("id")||"").trim()};n.off("click").on("click",function(t){t.preventDefault(),t.stopPropagation(),e(a)})}})},t.fn.scrollSpy=function(o){var n=t(this),e="spy-"+parseInt(Date.now()*Math.random());n.each(function(){var n=t(this);if(o=jQuery.extend({onChange:function(){},onLeave:function(){},smoothScrollAnchor:!1,offset:0},o),n.is("a")&&-1!==(n.attr("href")||"").indexOf("#")){var r=i(n);if(r){var l={element:n,options:o,target:r,targetSel:'[id="'+r.attr("id").trim()+'"]',id:r.attr("id").trim()};a.addItem(e,l),n.data("scrollSpy",l),o.smoothScrollAnchor&&n.smoothScrollAnchor({offset:o.offset})}}})},t(window).scroll(r),t(window).bind("smoothscroll.update",r),t(function(){var o=window.location.hash.replace("#",""),n=a.all().filter(function(t){return t.targetSel==='[id="'+o.trim()+'"]'});t(window).on("load",function(){n.length&&e(n[0]),r()})})}(jQuery);